<!DOCTYPE html>
<html>
<head>
	<title>插入排序算法</title>
	<meta charset="utf-8">
	<meta name="keywords" content="插入排序算法">
</head>
<body>
	<script type="text/javascript">
		var arr=[];
		// 随机生成 10000 个在 [0,100000] 的随机数
		for(var m=0;m<10000;m++){
			var random=Math.ceil(Math.random()*100000);
			arr.push(random);
		}
		console.log(arr);
		// ------------------------------------------------------
		var arr1=arr.slice(0);		// 不能使用var arr1 = arr;将导致浅拷贝,影响后面的算法结果
		// console.log(arr1);

		// 插入排序基本算法
		function insertionSort(array) {
		    if (Object.prototype.toString.call(array).slice(8, -1) === 'Array') {
		        console.time('插入排序耗时：');
		        for (var i = 1; i < array.length; i++) {
		            var key = array[i];
		            var j = i - 1;
		            while (j >= 0 && array[j] > key) {
		                array[j + 1] = array[j];
		                j--;
		            }
		            array[j + 1] = key;
		        }
		        console.timeEnd('插入排序耗时：');
		        return array;
		    } else {
		        return 'array is not an Array!';
		    }
		}

		console.log(insertionSort(arr1));

		// --------------------------------------------------

		var arr2=arr.slice(0);
		// console.log(arr2);

		function binaryInsertionSort(array) {
		    if (Object.prototype.toString.call(array).slice(8, -1) === 'Array') {
		        console.time('二分插入排序耗时：');

		        for (var i = 1; i < array.length; i++) {
		            var key = array[i], left = 0, right = i - 1;
		            while (left <= right) {
		                var middle = parseInt((left + right) / 2);
		                if (key < array[middle]) {
		                    right = middle - 1;
		                } else {
		                    left = middle + 1;
		                }
		            }
		            for (var j = i - 1; j >= left; j--) {
		                array[j + 1] = array[j];
		            }
		            array[left] = key;
		        }
		        console.timeEnd('二分插入排序耗时：');

		        return array;
		    } else {
		        return 'array is not an Array!';
		    }
		}

		console.log(binaryInsertionSort(arr2));
	</script>
</body>
</html>